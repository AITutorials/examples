


### 问题背景


这是出现在某头条公司面试中的问题。fasttext模型因其简单的结构和在大规模文本处理上的高性能而闻名于世，而考核该模型在哪些部分上的优化得以增强性能几乎成为fasttext面试中的必考问题。

---

![avatar](./img/fasttext-logo-color-web.png)

---

### 解题思路


#### 第一步: 找出核心知识点并解析

* fasttext模型:
>	* fasttext模型是结构简单，仅由Embedding层，GAP层和输出层组成，适用于大规模文本分类的高效选择之一。使用n-gram特征，层次softmax是fasttext模型的两大显著特征。

---

* fasttext模型高效训练的原因:
>	* 1，模型结构简单，参数量相比大型模型(如BERT)较少，即提高训练效率又提高推断效率。
>	* 2，当业务场景中存在大量目标类别时，fasttext的输出层使用层次softmax提升训练效率。

---

* 层次softmax详解:
>	* 1，什么是层次softmax: 是一种使用最优二叉树结构替代网络原有输出层(全连接层)的方式。
>	* 2，提升训练效率的内在原理: 在训练阶段，由于二叉树是根据预先统计的每个标签数量的占比构造的哈夫曼树（最优二叉树），根据哈夫曼树的性质，使得占比最大的标签节点路径最短，又因为路径中的节点代表参数量，也就意味着这种方式需要更新的参数最少，因此提升训练速度。
>	* 3，该方式对模型推断(预测)是否有影响: 在预测阶段，相比全连接层速度略有提升，因为运算参数减少了1/N，N是标签总数。
>	* 4，是否存在一定弊端: 因为最优二叉树的节点中存储参数，而样本数量最多的标签对应的参数又最少，可能出现在某些类别上欠拟合，影响模型准确率。因此，若非存在大量目标类别产生的训练低效，首选具有全连接层的输出层。


---

#### 第二步: 整合核心知识点形成答案


    fasttext的输出层使用层次softmax提升在大量类别上的训练效率。     

---

<!--

### 问题拓展

* 说一说为何fasttext需要加入n-gram特征
* 简述层次softmax提升训练效率的原理


---

-->
